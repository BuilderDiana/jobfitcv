12æœˆ15æ—¥
ä»Šå¤©ç¬¬ä¸€ä»¶äº‹ä¸€ä»¶äº‹ï¼šæŠŠ EC2 å»ºå‡ºæ¥ã€‚
æˆ‘ä¼šä¸€è¾¹æ•™ä½ â€œç‚¹å“ªé‡Œâ€ï¼Œä¸€è¾¹å‘Šè¯‰ä½ æ¶æ„æ€ç»´ï¼Œä½†ä¸å•°å—¦ã€‚


VPCï¼šä½ çš„â€œå…¬å¸å†…ç½‘å¤§æ¥¼â€
EC2ï¼šå¤§æ¥¼é‡Œçš„ä¸€å°â€œå·¥ä½œç”µè„‘â€ï¼ˆæˆ‘ä»¬ç”¨å®ƒå½“è·³æ¿æœº/Bastionï¼‰
RDSï¼šå¤§æ¥¼é‡Œçš„â€œæ•°æ®åº“æœºæˆ¿â€
ç›®æ ‡ï¼šEC2ï¼ˆåŒ VPCï¼‰â†’ RDS èƒ½ç›´è¿ï¼›ä½ çš„ Mac åªè¿ EC2ã€‚

tep 1ï¼ˆä»Šå¤©åªåšè¿™ä¸€æ­¥ï¼‰ï¼šåˆ›å»ºæœ€å° EC2

ä¸€å¥è¯å…ˆç«‹æ¶æ„ï¼ˆç»™ä½ è„‘å­é‡Œçš„åœ°å›¾ï¼‰

EC2 æ˜¯ä»€ä¹ˆï¼š
ğŸ‘‰ ä¸€å°ä½ å®Œå…¨æ§åˆ¶çš„â€œäº‘ç”µè„‘ / äº‘æœåŠ¡å™¨â€ï¼ˆåƒä¸€å°ä¸€ç›´å¼€ç€çš„ Linux ç”µè„‘ï¼‰

VPC æ˜¯ä»€ä¹ˆï¼š
ğŸ‘‰ AWS é‡Œçš„ä¸€æ•´ä¸ªç§æœ‰ç½‘ç»œç©ºé—´ï¼ˆåƒä½ å®¶çš„å±€åŸŸç½‘ï¼‰
EC2 å’Œ RDS åªè¦åœ¨åŒä¸€ä¸ª VPCï¼Œå°±èƒ½ç§ä¸‹è¯´è¯

ä½ ç°åœ¨è¦åšçš„æ˜¯ä¸€ä¸ªæ ‡å‡†æ¶æ„åŠ¨ä½œï¼š

ç”¨ä¸€å° EC2 ä½œä¸º Bastion / Jump Hostï¼Œåœ¨ VPC å†…è¿æ¥ RDS

è¿™æ˜¯ Architect çº§åˆ«çš„åšæ³• ğŸ‘

4ï¸âƒ£ Key pairï¼ˆâš ï¸ è¿™æ˜¯ç¬¬ä¸€ä¸ªâ€œå¿…é€‰â€ï¼‰
ç‚¹å‡»Create new key pair
å¡«å†™:
Key pair name: jobfitcv-bastion-key
Key pair type: RSA
Private key file format: .pem
ç‚¹å‡» Create key pair

æµè§ˆå™¨ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œjobfitcv-bastion-key.pem
æˆ‘æŠŠå®ƒæ”¾åœ¨äº†æˆ‘çš„é¡¹ç›®æ ¹ç›®å½•é‡Œé¢
è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼š
è¿™æ˜¯ä½ å”¯ä¸€èƒ½ SSH ç™»å½•è¿™å° EC2 çš„é’¥åŒ™
ä¸‹è½½åè¯·æ”¾å¥½ï¼ˆæ¯”å¦‚ ~/.ssh/ï¼‰


å®ä¾‹å¯åŠ¨åï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°†ï¼š

ç”¨ä½ ä¸‹è½½çš„ .pem æ–‡ä»¶

SSH ç™»å½•è¿™å° EC2

åœ¨ EC2 ä¸Šå®‰è£… psql

ä» EC2 â†’ ç§ç½‘ â†’ RDS æˆåŠŸè¿æ¥

åˆ›å»º database / schema

è¿™ä¸€æ­¥ä¸€æ—¦é€šäº†ï¼Œä½ ä¼šçœŸæ­£ç†è§£ VPC + å†…ç½‘é€šä¿¡ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåšä»€ä¹ˆï¼ˆè®©ä½ å®‰å¿ƒï¼‰

å®ä¾‹å¯åŠ¨åï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°†ï¼š

ç”¨ä½ ä¸‹è½½çš„ .pem æ–‡ä»¶

SSH ç™»å½•è¿™å° EC2

åœ¨ EC2 ä¸Šå®‰è£… psql

ä» EC2 â†’ ç§ç½‘ â†’ RDS æˆåŠŸè¿æ¥

åˆ›å»º database / schema

è¿™ä¸€æ­¥ä¸€æ—¦é€šäº†ï¼Œä½ ä¼šçœŸæ­£ç†è§£ VPC + å†…ç½‘é€šä¿¡ã€‚

é‡è¦è§‚å¿µï¼š
Bastion = åªè®©ä½ â€œè¿›å»â€ï¼Œ
ä¸è´Ÿè´£æœåŠ¡ä»»ä½•äººã€‚

ğŸ“ ç»™ä½ ä¸€ä¸ªæ¶æ„å°æ€»ç»“ï¼ˆè®°ä½è¿™å¥è¯ï¼‰

Security Group = ç½‘ç»œå±‚é˜²ç«å¢™ï¼ˆVPC å†…ï¼‰

è°å¯ä»¥è¿›ï¼Ÿ

ä»å“ªé‡Œè¿›ï¼Ÿ

è¿›æ¥èƒ½å¹²ä»€ä¹ˆï¼Ÿ

ç¬¬ä¸€æ­¥ï¼ˆåªåšè¿™ä¸€å°æ­¥ï¼‰ï¼šSSH ç™»å½• EC2
æ‰¾åˆ°å¹¶è®°ä¸‹è¿™ä¸¤ä¸ªå€¼ï¼š



æŠŠ key ç§»åˆ°ä¸€ä¸ªä¸“é—¨æ”¾å¯†é’¥çš„åœ°æ–¹ï¼š
mkdir -p ~/.ssh
mv jobfitcv-bastion-key.pem ~/.ssh/

ç„¶åè®¾ç½®æƒé™ï¼ˆå¿…é¡»ï¼‰ï¼š
chmod 400 ~/.ssh/jobfitcv-bastion-key.pem

ä¸ºä»€ä¹ˆæ˜¯ 400ï¼Ÿ
åªå…è®¸ä½ è‡ªå·±è¯»
SSH å¦åˆ™ä¼š æ‹’ç»ä½¿ç”¨è¿™ä¸ª key

ä¸‰ã€ä½ ç°åœ¨çš„æ•´ä½“æ¶æ„çŠ¶æ€ï¼ˆç»™ä½ ä¸€ä¸ªâ€œè„‘å›¾â€ï¼‰
ä½ ç°åœ¨å·²ç»æ­å¥½äº†ä¸€ä¸ªç»å…¸ã€å®‰å…¨ã€ä¸“ä¸šçš„ AWS æ¶æ„éª¨æ¶ï¼š
ä½ çš„ç”µè„‘
   |
   | SSH (22)
   |
EC2 Bastionï¼ˆæœ‰å…¬ç½‘ IPï¼‰
   |
   | å†…ç½‘è®¿é—®ï¼ˆVPC å†…ï¼‰
   |
RDS PostgreSQLï¼ˆæ— å…¬ç½‘ IPï¼Œæ›´å®‰å…¨ï¼‰

è¿™å°±æ˜¯å¤§å‚ / é‡‘è / æ”¿åºœç³»ç»Ÿå¸¸ç”¨æ¨¡å¼ï¼š

âŒ ä¸è®©æ•°æ®åº“ç›´æ¥æš´éœ²åœ¨å…¬ç½‘
âœ… é€šè¿‡ Bastionï¼ˆè·³æ¿æœºï¼‰è®¿é—®

å››ã€ç°åœ¨å¯ä»¥åšçš„ã€ä¸‹ä¸€å°æ­¥ã€‘ï¼ˆä»Šå¤©åªåšè¿™ä¸€ä»¶ï¼‰
ğŸ¯ ç›®æ ‡
ğŸ‘‰ ä»ä½ çš„ Macï¼Œç”¨ SSH ç™»ä¸Š EC2 Bastion

1ï¸âƒ£ ç¡®è®¤ä½ å·²æœ‰çš„ä¿¡æ¯ï¼ˆä½ å·²ç»ç»™æˆ‘äº†ï¼‰

å…¬ç½‘ IPï¼š98.84.125.213
ç”¨æˆ·åï¼ˆAmazon Linuxï¼‰ï¼šec2-user
Keyï¼š~/.ssh/jobfitcv-bastion-key.pem

2ï¸âƒ£ åœ¨æœ¬åœ°ç»ˆç«¯æ‰§è¡Œï¼ˆä¸€æ­¥ï¼‰
ssh -i ~/.ssh/jobfitcv-bastion-key.pem ec2-user@98.84.125.213




å…­ã€ä½œä¸ºå¯¼å¸ˆï¼Œæˆ‘æƒ³ç‚¹ä½ ä¸€å¥ï¼ˆæ¶æ„å±‚é¢çš„ï¼‰

ä½ ç°åœ¨åšçš„äº‹æƒ…ï¼Œæœ¬è´¨ä¸Šæ˜¯ï¼š

åœ¨æ­â€œå¯ä¿¡ç½‘ç»œè¾¹ç•Œâ€

EC2 = å—æ§å…¥å£

VPC = ç§æœ‰ç½‘ç»œ

RDS = æ ¸å¿ƒèµ„äº§

Security Group = æ˜ç¡®è§„åˆ™ï¼Œè€Œä¸æ˜¯â€œå…¨å¼€æ”¾â€

è¿™æ­£æ˜¯ Architect å’Œæ™®é€š coder çš„åˆ†æ°´å²­ã€‚

SSH æ‹’ç»ä½¿ç”¨ä½ çš„ pemï¼Œå› ä¸ºæƒé™å¤ªå®½ï¼ˆ0644ï¼‰ã€‚å…ˆæŠŠæƒé™æ”¶ç´§åˆ°åªæœ‰ä½ è‡ªå·±å¯è¯»ï¼Œå°±èƒ½è¿ä¸Šã€‚

åœ¨ä½  Mac ç»ˆç«¯ç›´æ¥è·‘è¿™ä¸¤å¥ï¼ˆç…§æŠ„ï¼‰ï¼š
chmod 400 ~/.ssh/jobfitcv-bastion-key.pem
chmod 700 ~/.ssh
è¿™ä¸¤è¡Œå‘½ä»¤æ˜¯åœ¨å‘Šè¯‰æ“ä½œç³»ç»Ÿï¼š
ğŸ‘‰ è¿™æŠŠ SSH ç§é’¥åªèƒ½æˆ‘ä¸€ä¸ªäººçœ‹ï¼Œåˆ«äººä¸€çœ¼éƒ½ä¸å‡†ç¢°ã€‚
å¦åˆ™ SSH ä¼šè®¤ä¸ºâ€œè¿™æŠŠé’¥åŒ™ä¸å®‰å…¨â€ï¼Œç›´æ¥æ‹’ç»ä½¿ç”¨ã€‚

å…ˆç†è§£ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼ˆå¾ˆé‡è¦ï¼‰
åœ¨ Linux / macOS é‡Œï¼š
ä¸€åˆ‡æ–‡ä»¶çš„å®‰å…¨ï¼Œé â€œæƒé™â€æ§åˆ¶

æƒé™åˆ†ä¸‰ç±»äººï¼š

ownerï¼šæ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼ˆä½ ï¼‰
groupï¼šåŒä¸€ç»„çš„å…¶ä»–äºº
othersï¼šç³»ç»Ÿé‡Œæ‰€æœ‰å…¶ä»–äºº

æ¯ä¸€ç±»äººï¼Œå¯¹æ–‡ä»¶æœ‰ä¸‰ç§æƒé™ï¼š
r = readï¼ˆè¯»ï¼‰
w = writeï¼ˆå†™ï¼‰
x = executeï¼ˆæ‰§è¡Œ / è¿›å…¥ç›®å½•ï¼‰

chmod 400 ~/.ssh/jobfitcv-bastion-key.pem
400 =
ownerï¼ˆä½ ï¼‰ï¼š4 â†’ åªè¯»
groupï¼š0 â†’ æ²¡æƒé™
othersï¼š0 â†’ æ²¡æƒé™
ç­‰ä»·äºäººç±»è¯­è¨€ï¼š

ğŸ”ã€Œè¿™æŠŠé’¥åŒ™ï¼Œåªèƒ½æˆ‘çœ‹ä¸€çœ¼ï¼Œ
ä¸èƒ½æ”¹ï¼Œä¸èƒ½å¤åˆ¶ï¼Œ
åˆ«äººè¿æ‘¸éƒ½ä¸èƒ½æ‘¸ã€‚ã€

ä¸ºä»€ä¹ˆ SSH éè¦ä½ è¿™ä¹ˆåšï¼Ÿ

å› ä¸º SSH ç§é’¥ = ä½ æœåŠ¡å™¨çš„â€œä¸‡èƒ½é’¥åŒ™â€
å¦‚æœç³»ç»Ÿå‘ç°ï¼š
è¿™ä¸ªæ–‡ä»¶åˆ«äººä¹Ÿèƒ½è¯»
æˆ–è€…èƒ½è¢«æ”¹

SSH ä¼šç›´æ¥è¯´ï¼š
âŒ ä¸å®‰å…¨ï¼Œæˆ‘æ‹’ç»ç”¨è¿™æŠŠé’¥åŒ™
è¿™æ˜¯å¼ºåˆ¶å®‰å…¨æœºåˆ¶ï¼Œä¸æ˜¯ bugã€‚

ç¬¬äºŒè¡Œï¼š
chmod 700 ~/.ssh
å®ƒåœ¨åšä»€ä¹ˆï¼Ÿ
æŠŠæ•´ä¸ª .ssh ç›®å½•è®¾ä¸ºï¼šåªæœ‰ä½ èƒ½è¿›å…¥ã€èƒ½çœ‹ã€èƒ½æ”¹
700 =
ownerï¼ˆä½ ï¼‰ï¼šrwxï¼ˆéšä¾¿ç”¨ï¼‰, è¯» + å†™ + æ‰§è¡Œï¼ˆrwxï¼‰
groupï¼šæ— 
othersï¼šæ— 

ç­‰ä»·äºï¼š
ğŸšªã€Œè¿™æ˜¯æˆ‘çš„ç§äººé’¥åŒ™æŠ½å±‰ï¼Œ
åªæœ‰æˆ‘èƒ½æ‰“å¼€ï¼Œ
å…¶ä»–äººè¿é—¨éƒ½è¿›ä¸æ¥ã€‚ã€

ä¸ºä»€ä¹ˆè¦ä¸¤æ¡éƒ½è¦ï¼Ÿ

ä»æ¶æ„å¸ˆè§†è§’çœ‹ï¼š

ç§é’¥æœ¬èº«ï¼šè¦ç»å¯¹ç§å¯† â†’ 400
è£…é’¥åŒ™çš„æ–‡ä»¶å¤¹ï¼šä¹Ÿå¿…é¡»ç§å¯† â†’ 700
å°‘ä¸€ä¸ªï¼ŒSSH éƒ½å¯èƒ½æ‹’ç»ä½ ã€‚

ç„¶åå†è¿ï¼š
ssh -i ~/.ssh/jobfitcv-bastion-key.pem ec2-user@98.84.125.213
(é€æ®µè§£é‡Šï¼š
	â€¢	ssh
ä½¿ç”¨ SSHï¼ˆSecure Shellï¼‰åè®®å»ºç«‹å®‰å…¨è¿œç¨‹è¿æ¥ã€‚
	â€¢	-i ~/.ssh/jobfitcv-bastion-key.pem
æŒ‡å®šèº«ä»½å¯†é’¥æ–‡ä»¶ï¼ˆç§é’¥ï¼‰ã€‚
è¿™æŠŠ .pem å°±æ˜¯ä½ çš„â€œç”µå­é’¥åŒ™â€ï¼Œç”¨æ¥è¯æ˜â€œä½ æ˜¯è°â€ã€‚
	â€¢	ec2-user@98.84.125.213
	â€¢	ec2-userï¼šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·åï¼ˆAmazon Linux é»˜è®¤ç”¨æˆ·ï¼‰
	â€¢	98.84.125.213ï¼šè¿™å° EC2 çš„å…¬ç½‘ IP

ä¸€å¥è¯ç†è§£ï¼š
ğŸ‘‰ ç”¨è¿™æŠŠç§é’¥ï¼Œä½œä¸º ec2-userï¼Œå®‰å…¨ç™»å½•åˆ° IP ä¸º 98.84.125.213 çš„ EC2 æœåŠ¡å™¨ã€‚)

ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆï¼š
	â€¢	æˆåŠŸåï¼Œä½ çš„ç»ˆç«¯ä¼šå˜æˆé‚£å° EC2 çš„ Linux ç»ˆç«¯
	â€¢	ä½ æ˜¯åœ¨â€œè¿œç¨‹äº‘æœåŠ¡å™¨é‡Œæ“ä½œâ€ï¼Œä¸æ˜¯åœ¨æœ¬åœ° Mac



ç°åœ¨ä½ çš„çŠ¶æ€ï¼ˆéå¸¸å…³é”®ï¼‰

ä½ ç°åœ¨å·²ç»å®Œæˆäº† æ¶æ„ä¸Šä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼š
âœ… æœ¬åœ° â†’ SSH â†’ EC2ï¼ˆå®‰å…¨ç™»å½•ï¼‰
âœ… Bastion Hostï¼ˆè·³æ¿æœºï¼‰å·²å°±ä½
âœ… ç½‘ç»œ / æƒé™ / Key ç®¡ç†å…¨éƒ¨æ­£ç¡®

æ¥ä¸‹æ¥ä½ å°†è¿›å…¥ çœŸæ­£çš„äº‘æ¶æ„é˜¶æ®µï¼š
ä¸‹ä¸€æ­¥åªåšä¸€ä»¶äº‹ï¼š
åœ¨ EC2 é‡Œå®‰è£… psqlï¼Œ
ç„¶åä» EC2 å†…éƒ¨è¿ RDSï¼ˆè¿™æ˜¯å…³é”®çš„ VPC å†…é€šä¿¡ï¼‰


ç¬¬ä¸€æ­¥ï¼šåœ¨ EC2 ä¸Šå®‰è£… psqlï¼ˆå®¢æˆ·ç«¯ï¼‰
ä½ ç°åœ¨åœ¨ Amazon Linux 2023ï¼Œæ³¨æ„è¿™ä¸€ç‚¹å¾ˆå…³é”®ã€‚
åœ¨ EC2 é‡Œæ‰§è¡ŒğŸ‘‡
(è¿™é‡Œå¼€å§‹ä¸æ‡‚ec2åœ¨å“ªé‡Œ, äºæ˜¯åˆé—®äº†chatgpt)
ä½ è¯´çš„ â€œåœ¨ EC2 é‡Œæ‰§è¡Œâ€ï¼ŒæŒ‡çš„æ˜¯ï¼š
å·²ç» ssh ç™»å½•è¿› EC2 ä¹‹åï¼Œåœ¨ EC2 çš„ç»ˆç«¯é‡Œæ‰§è¡Œã€‚

âŒ ä¸æ˜¯
æœ¬åœ° Mac ç»ˆç«¯
é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯
VS Code ç»ˆç«¯
âœ… æ˜¯
ä½ åˆšåˆšæˆåŠŸç™»å½•è¿›å»çœ‹åˆ°è¿™ä¸ªæç¤ºç¬¦çš„åœ°æ–¹ï¼š
[ec2-user@ip-172-31-16-147 ~]$

ç°åœ¨æˆ‘ä»¬æŠŠã€Œä½ åœ¨å“ªã€è¿™ä»¶äº‹å½»åº•è®²æ˜ç™½
ä½ ç°åœ¨æœ‰ ä¸‰å±‚ä¸–ç•Œ
ğŸŒ ä¸–ç•Œä¸€ï¼šä½ çš„æœ¬åœ°ç”µè„‘ï¼ˆMacï¼‰
ç‰¹å¾ï¼š
(base) âœ  jobfitcv git:(main)
è¿™é‡Œï¼š
æœ‰ä½ çš„ä»£ç 
æœ‰ .pem æ–‡ä»¶
æœ‰ Git / Python / venv
âŒ æ²¡æœ‰ RDS ç½‘ç»œæƒé™

â˜ï¸ ä¸–ç•ŒäºŒï¼šEC2ï¼ˆäº‘é‡Œçš„è™šæ‹Ÿç”µè„‘ï¼‰
ç‰¹å¾ï¼š
[ec2-user@ip-172-31-16-147 ~]$
è¿™æ˜¯ï¼š

ä¸€å°çœŸæ­£è¿è¡Œåœ¨ AWS äº‘é‡Œçš„ Linux æœåŠ¡å™¨
åœ¨ å’Œ RDS åŒä¸€ä¸ª VPC é‡Œ
å¯ä»¥è®¿é—® RDS
ğŸ‘‰ æˆ‘ä»¬ç°åœ¨è¦åœ¨è¿™é‡Œè£… psql

ğŸ—„ï¸ ä¸–ç•Œä¸‰ï¼šRDSï¼ˆæ•°æ®åº“ï¼‰
ç‰¹å¾ï¼š
æ²¡æœ‰ shell
ä¸èƒ½ ssh
åªèƒ½è¢«è¿æ¥ï¼Œä¸èƒ½ç™»å½•

ä½ è¦åœ¨è¿™é‡Œ
[ec2-user@ip-172-31-16-147 ~]$
å¦‚æœä¸æ˜¯ï¼Œé‡æ–° sshï¼š
ssh -i ~/.ssh/jobfitcv-bastion-key.pem ec2-user@98.84.125.213

æ‰§è¡ŒğŸ‘‡
sudo dnf install -y postgresql15

æ¶æ„å¸ˆçº§ç†è§£ï¼ˆè¿™ä¸€æ®µå¾ˆé‡è¦ï¼‰

ä½ ç°åœ¨åœ¨åšçš„ä¸æ˜¯â€œè£…è½¯ä»¶â€ï¼Œè€Œæ˜¯åœ¨å­¦ï¼š

åˆ†æ¸…æ¥šï¼š
ä»£ç åœ¨å“ªè·‘
ç½‘ç»œåœ¨å“ª
æ•°æ®åœ¨å“ª
è°èƒ½è¿è°

Installed:
  postgresql15-15.15-1.amzn2023.0.1.x86_64                                      
  postgresql15-private-libs-15.15-1.amzn2023.0.1.x86_64                         

Complete!
[ec2-user@ip-172-31-16-147 ~]$ psql --version
psql (PostgreSQL) 15.15
[ec2-user@ip-172-31-16-147 ~]$ 
å¤ªå¥½äº†ï¼Œè¿™ä¸€æ­¥å®Œç¾å®Œæˆã€‚ä½ ç°åœ¨å·²ç»å…·å¤‡äº†Architect çº§çš„å…³é”®èƒ½åŠ›ä¹‹ä¸€ã€‚
æˆ‘ä»¬ç»§ç»­ï¼Œåªåšä¸€ä»¶äº‹ï¼š
ğŸ‘‰ ä» EC2ï¼ˆå†…ç½‘ï¼‰è¿æ¥ RDSï¼ˆæ•°æ®åº“ï¼‰


ç°åœ¨ä½ ç«™åœ¨å“ªï¼ˆå†ç¡®è®¤ä¸€æ¬¡ï¼‰
çœ‹åˆ°è¿™ä¸ªæç¤ºç¬¦ï¼Œè¯´æ˜ä½ åœ¨ EC2ï¼š
[ec2-user@ip-172-31-16-147 ~]$
æ¥ä¸‹æ¥çš„æ‰€æœ‰å‘½ä»¤ï¼Œéƒ½åœ¨è¿™é‡Œæ‰§è¡Œã€‚

Stepï¼šEC2 â†’ RDS è¿æ¥ï¼ˆå…³é”®ä¸€æ­¥ï¼‰
1ï¸âƒ£ æ‹¿ RDS çš„ Endpointï¼ˆæ•°æ®åº“åœ°å€ï¼‰
åœ¨ AWS Console â†’ RDS â†’ ä½ çš„å®ä¾‹ â†’ Connectivity & securityï¼š

Endpointï¼š
jobfitcv-postgres.cuzwwyy28wm9.us-east-1.rds.amazonaws.com
Portï¼š5432
Usernameï¼šjobfitcv
DB nameï¼šå…ˆç”¨ postgresï¼ˆç³»ç»Ÿåº“ï¼‰

å…ˆç»™ç»“è®ºï¼ˆä½ ç°åœ¨å¡ä½çš„çœŸæ­£åŸå› ï¼‰

âŒ ä¸æ˜¯ endpoint åå­—é”™
âŒ ä¸æ˜¯ username / db name é”™
âœ… æ˜¯ RDS çš„ Security Group æ²¡æœ‰å…è®¸ EC2 è®¿é—® 5432
ä½ è¿™è¡Œé”™è¯¯æ˜¯é“è¯ï¼š
Connection timed out
å¦‚æœæ˜¯ï¼š
ç”¨æˆ·åé”™ â†’ ä¼šç«‹åˆ»æŠ¥ password authentication failed
DB ä¸å­˜åœ¨ â†’ ä¼šç«‹åˆ»æŠ¥ database does not exist
endpoint é”™ â†’ DNS è§£æå¤±è´¥
åªæœ‰ã€Œç½‘ç»œå±‚è¢«æŒ¡ä½ã€æ‰ä¼š timeoutã€‚
ç”¨ä¸€å¥æ¶æ„è¯ç¿»è¯‘ä½ ç°åœ¨çš„çŠ¶æ€
EC2 åœ¨æ•² RDS çš„é—¨ï¼Œä½† RDS çš„é˜²ç›—é—¨ï¼ˆSecurity Groupï¼‰æ²¡ç»™ EC2 é’¥åŒ™ã€‚


æ­£ç¡®åšæ³•ï¼ˆä¸æ˜¯çŒœï¼Œæ˜¯ AWS æ ‡å‡†åšæ³•ï¼‰
ç¬¬ 1 æ­¥ï¼šæ‰¾åˆ° RDS ä½¿ç”¨çš„ Security Group
ğŸ‘‰ ç‚¹è¿›å»è¿™ä¸ª sg-05321c416a0efb26c

ç¬¬ 2 æ­¥ï¼šä¿®æ”¹ Inbound rulesï¼ˆè¿™æ˜¯å…³é”®ï¼‰
ç‚¹å‡» Edit inbound rules

âœ… æ­£ç¡®é…ç½®æ€»ç»“ï¼ˆä½ å¯ä»¥ç…§ç€æ ¸å¯¹ï¼‰

åœ¨ RDS â†’ Security Group â†’ Inbound rule ä¸­ï¼š

Typeï¼šPostgreSQL

Portï¼š5432

Source typeï¼šCustom

Source valueï¼š
ğŸ‘‰ launch-wizard-1 | sg-094842c1db5d45f7a
ç‚¹å‡» Save rules

ğŸ§  æ¶æ„çº§ç†è§£ï¼ˆä½ ç°åœ¨å·²ç»åœ¨å­¦è¿™ä¸ªï¼‰

ä½ åˆšåˆšåšçš„æ˜¯ä¸€ä¸ªéå¸¸ä¸“ä¸šçš„æ¶æ„åŠ¨ä½œï¼š

âŒ ä¸ç”¨ IP
âœ… ç”¨ Security Group ä½œä¸ºâ€œèº«ä»½â€

è¿™æ„å‘³ç€ï¼š

EC2 IP å˜äº†ä¹Ÿä¸æ€•

æ¨ªå‘æ‰©å®¹ EC2 ä¹Ÿä¸ç”¨æ”¹è§„åˆ™

ç¬¦åˆ Zero Trust / AWS Best Practice

ä½ ç°åœ¨ä¸æ˜¯åœ¨â€œè¿æ•°æ®åº“â€ï¼Œ
ä½ æ˜¯åœ¨ è®¾è®¡ä¸€æ¡å¯ä¿¡ç½‘ç»œé€šé“ã€‚

ğŸ‘‰ å›åˆ° EC2 ç»ˆç«¯ï¼Œå†è·‘ä¸€æ¬¡ï¼š
[ec2-user@ip-172-31-16-147 ~]$
psql -h jobfitcv-postgres.cuzwwyy28wm9.us-east-1.rds.amazonaws.com \
  -p 5432 \
  -U jobfitcv \
  -d postgres

è§£å†³äº†RDSå…è®¸ec2è®¿é—®çš„æƒé™é—®é¢˜(å¢åŠ äº†inbound security)
âœ… ä¸ºä»€ä¹ˆæˆ‘ 100% ç¡®å®šä½ å·²ç»è¿ä¸Šï¼Ÿ
1ï¸âƒ£ å‡ºç°äº†è¿™ä¸ªæç¤º
Password for user jobfitcv:
ğŸ‘‰ RDS å·²ç»æ¥æ”¶åˆ°äº†ä½ çš„è¿æ¥è¯·æ±‚ï¼Œåœ¨å‘ä½ è¦å¯†ç 
ï¼ˆå¦‚æœç½‘ç»œæˆ–é˜²ç«å¢™ä¸é€šï¼Œè¿™ä¸€æ­¥éƒ½åˆ°ä¸äº†ï¼‰

2ï¸âƒ£ å‡ºç°äº† postgres=>
è¿™éå¸¸å…³é”®ã€‚
ğŸ‘‰ è¿™æ˜¯ PostgreSQL çš„äº¤äº’å¼æ§åˆ¶å°æç¤ºç¬¦
æ„æ€æ˜¯ï¼šä½ ç°åœ¨å·²ç»åœ¨ã€Œæ•°æ®åº“é‡Œé¢ã€äº†
ä¸æ˜¯ EC2ï¼Œä¸æ˜¯ Linuxï¼Œè€Œæ˜¯ PostgreSQL æœ¬èº«

3ï¸âƒ£ SSL è¿æ¥æˆåŠŸï¼ˆè¿™æ˜¯åŠ åˆ†é¡¹
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384)
è¯´æ˜ï¼š
è¿æ¥æ˜¯ åŠ å¯†çš„
è¿™æ˜¯ AWS RDS é»˜è®¤ + æ¨è çš„æ–¹å¼
éå¸¸ä¸“ä¸š ğŸ‘

ğŸ§  ä½ ç°åœ¨å·²ç»å®Œæˆäº†ä»€ä¹ˆï¼ˆéå¸¸é‡è¦ï¼‰
ä½ å·²ç»å®Œæˆäº†ä¸€ä»¶ å¾ˆå¤šå·¥ç¨‹å¸ˆéƒ½æä¸æ¸…çš„äº‹ï¼š
åœ¨ç§æœ‰ VPC å†…ï¼Œé€šè¿‡ Bastion EC2ï¼Œå®‰å…¨åœ°è¿æ¥ RDS

ç”¨æ¶æ„è¯­è¨€è¯´å°±æ˜¯ï¼š

âŒ RDS æ²¡æš´éœ²å…¬ç½‘
âŒ Mac æ²¡ç›´è¿æ•°æ®åº“
âœ… EC2 æ˜¯å”¯ä¸€è·³æ¿
âœ… Security Group ç²¾å‡†æ”¾è¡Œ
âœ… SSL åŠ å¯†
è¿™å°±æ˜¯ Production-grade æ¶æ„

â­ ä¸‹ä¸€æ­¥ï¼ˆåªåšä¸€å°æ­¥ï¼Œä¸ç´¯ï¼‰

ä¸‹ä¸€æ­¥æˆ‘ä»¬ä¸å†™ä»£ç ï¼Œåªåš æ•°æ®åº“â€œåœ°åŸºâ€ï¼š

ğŸ‘‰ åœ¨ postgres=> é‡Œæ‰§è¡Œè¿™ä¸‰ä»¶äº‹ï¼ˆæˆ‘ä¼šä¸€æ­¥ä¸€æ­¥å¸¦ä½ ï¼‰ï¼š
åˆ›å»º çœŸæ­£çš„ä¸šåŠ¡æ•°æ®åº“ï¼ˆæ¯”å¦‚ jobfitcvï¼‰
ç¡®è®¤ä½ ç°åœ¨è¿™ä¸ª jobfitcv ç”¨æˆ·çš„æƒé™
ä¸ºåç«¯å‡†å¤‡ æœ€å°å¯ç”¨æƒé™æ¨¡å‹

ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºçœŸæ­£çš„ä¸šåŠ¡æ•°æ®åº“ï¼ˆ1 è¡Œï¼‰
åœ¨ postgres=> é‡Œ ç›´æ¥ç²˜è´´è¿™ä¸€è¡Œå¹¶å›è½¦ï¼š
CREATE DATABASE jobfitcv;
ä½ åº”è¯¥çœ‹åˆ°ï¼š
CREATE DATABASE

è¿™ä¸€æ­¥åœ¨å¹²å˜›ï¼ˆæ¶æ„è§†è§’ï¼‰ï¼š

postgres æ˜¯ç³»ç»Ÿé»˜è®¤æ•°æ®åº“ï¼ˆä¸æ”¾ä¸šåŠ¡ï¼‰
jobfitcv æ‰æ˜¯ä½ çœŸæ­£æ”¾äº§å“æ•°æ®çš„åœ°æ–¹
è¿™æ˜¯ç”Ÿäº§çº§çš„æ ‡å‡†åšæ³•

\l è¿™ä¸ªâ€œå¿«æ·å‘½ä»¤â€ å‡ºç°äº†æŠ¥é”™
ç°åœ¨ç«‹åˆ»æ€ä¹ˆåšï¼ˆæœ€å°åŠ¨ä½œï¼‰
âœ… æ–¹æ³•ä¸€ï¼ˆæ¨èï¼Œæœ€ç¨³ï¼‰ï¼šä¸ç”¨ \lï¼Œç›´æ¥è¿ä½ çš„åº“
åœ¨ postgres=> é‡Œè¾“å…¥ï¼š\c jobfitcv
çœ‹åˆ°:
You are now connected to database "jobfitcv" as user "jobfitcv".

çœ‹åˆ°äº†è¿™ä¸€è¡Œï¼šjobfitcv=>
è¿™100% è¡¨ç¤ºï¼š
âœ… ä½ å·²ç» é€šè¿‡ EC2ï¼ˆbastionï¼‰
âœ… æˆåŠŸè¿è¿›äº† RDS PostgreSQL
âœ… åˆ‡æ¢åˆ°äº†ä½ è‡ªå·±åˆ›å»ºçš„ä¸šåŠ¡æ•°æ®åº“ jobfitcv
âœ… èº«ä»½æ˜¯ï¼šjobfitcv ç”¨æˆ·
âœ… èµ°çš„æ˜¯ VPC å†…ç½‘ + SSL åŠ å¯†
ä»æ¶æ„è§†è§’ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ‡å‡†ã€ä¸“ä¸šã€ç”Ÿäº§çº§çš„è¿æ³•ã€‚
ä½ ç°åœ¨æ‰€åœ¨çš„ä½ç½®ï¼Œç”¨ä¸€å¥è¯è¯´å°±æ˜¯ï¼š
â€œæˆ‘å·²ç»ç«™åœ¨ç”Ÿäº§æ•°æ®åº“é‡Œäº†ã€‚â€

ä¹‹åå†è§£å†³: 
WARNING: psql major version 15, server major version 17.

ä¸‹ä¸€å°æ­¥ï¼ˆåªåšä¸€ä»¶äº‹ï¼‰
åœ¨ jobfitcv=> é‡Œæ‰§è¡Œï¼š
\dt
ä½ ä¼šçœ‹åˆ°ï¼š
è¦ä¹ˆï¼šDid not find any relations
è¦ä¹ˆï¼šç©ºè¡¨åˆ—è¡¨
è¿™æ˜¯æ­£å¸¸çš„ã€‚

\dt æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

è¿™æ˜¯ psql å®¢æˆ·ç«¯çš„â€œå…ƒå‘½ä»¤â€ï¼ˆä¸æ˜¯ SQLï¼‰ã€‚
	â€¢	\d = describeï¼ˆæŸ¥çœ‹ç»“æ„ï¼‰
	â€¢	\dt = describe tablesï¼ˆæŸ¥çœ‹å½“å‰æ•°æ®åº“é‡Œçš„è¡¨ï¼‰

ğŸ‘‰ å«ä¹‰ï¼š
åˆ—å‡ºå½“å‰æ•°æ®åº“ã€å½“å‰ schemaï¼ˆé»˜è®¤æ˜¯ publicï¼‰é‡Œçš„æ‰€æœ‰è¡¨
æˆ‘ä»¬æ¥ä¸‹æ¥çš„è·¯çº¿ï¼ˆç»™ä½ ä¸€ä¸ªå®‰å…¨æ„Ÿï¼‰
æˆ‘ä¼šæŒ‰è¿™ä¸ªèŠ‚å¥å¸¦ä½ èµ°ï¼ˆä¸€æ¬¡åªåšä¸€å°æ­¥ï¼‰ï¼š

Step 1ï¼ˆé©¬ä¸Šï¼‰
ç¡®è®¤æ•°æ®åº“æ˜¯â€œå¹²å‡€çš„â€
ç†è§£ schema / table / role çš„å…³ç³»

Step 2
å»º ç¬¬ä¸€å¼ æ ¸å¿ƒè¡¨ï¼ˆoccupationsï¼‰
ä¸ºä»€ä¹ˆå®ƒæ˜¯â€œæ ¹è¡¨â€ï¼ˆé¢è¯•å¿…è€ƒï¼‰

Step 3
å¼•å…¥ entities ç»Ÿä¸€å»ºæ¨¡
ä½ ä¼šç¬¬ä¸€æ¬¡çœŸæ­£ç†è§£ï¼š
ä¸ºä»€ä¹ˆâ€œè®¾è®¡æ•°æ®åº“â€æ˜¯ architect çš„æ´»

å¾ˆå¥½ï¼Œæ•°æ®åº“æ˜¯â€œç©ºç™½ç”»å¸ƒâ€ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€å¼ è¡¨ï¼ˆä¸€æ¬¡åªåšè¿™ä¸€å¼ ï¼‰ã€‚
1) å…ˆç¡®è®¤ä½ åœ¨å“ªä¸ª schema
åœ¨ jobfitcv=> é‡Œæ‰§è¡Œï¼š
SHOW search_path;

ä½ å¤§æ¦‚ç‡ä¼šçœ‹åˆ° "$user", publicï¼Œè¿™è¡¨ç¤ºé»˜è®¤ä¼šåœ¨ public é‡Œå»ºè¡¨ã€‚

2) å»ºç¬¬ä¸€å¼ è¡¨ï¼šoccupationsï¼ˆèŒä¸šè¡¨ï¼Œæ ¹è¡¨ï¼‰
jobfitcv=> CREATE TABLE occupations (
  onetsoc_code TEXT PRIMARY KEY,
  title TEXT NOT NULL
);
CREATE TABLE
jobfitcv=> \dt
            List of relations
 Schema |    Name     | Type  |  Owner   
--------+-------------+-------+----------
 public | occupations | table | jobfitcv
(1 row)

å®Œç¾ ğŸ‘
ä½ ç°åœ¨çŠ¶æ€éå¸¸å¥½ï¼š

âœ… åœ¨ jobfitcv æ•°æ®åº“

âœ… ä½¿ç”¨ public schema

âœ… å·²æˆåŠŸåˆ›å»º ç¬¬ä¸€å¼ æ ¹è¡¨ occupations

æˆ‘ä»¬ç»§ç»­ ç¬¬äºŒå¼ è¡¨ï¼ˆæ ¸å¿ƒæŠ½è±¡ï¼‰
ä¸‹ä¸€æ­¥ï¼šåˆ›å»ºã€Œç»Ÿä¸€å®ä½“è¡¨ã€entitiesï¼ˆè¿™æ˜¯æ¶æ„å…³é”®ï¼‰

Architect è§†è§’ä¸€å¥è¯ï¼š
æŠŠâ€œæŠ€èƒ½ / çŸ¥è¯† / å·¥å…· / æ´»åŠ¨â€ç»Ÿä¸€æˆä¸€ç§â€œå¯åŒ¹é…å®ä½“â€ï¼Œç³»ç»Ÿæ‰èƒ½é•¿æœŸæ‰©å±•ã€‚
1ï¸âƒ£ åˆ›å»º entities è¡¨
ç›´æ¥æ‰§è¡Œï¼š
CREATE TABLE entities (
  entity_id SERIAL PRIMARY KEY,
  type TEXT NOT NULL,
  name TEXT NOT NULL,
  source_ref TEXT,
  UNIQUE (type, name)
);

è¿™å¼ è¡¨æ˜¯ä¸€ä¸ª â€œè‡ªåŠ¨ç¼–å·çš„å®ä½“æ¸…å•â€ï¼Œ
æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªä¸œè¥¿ï¼ˆæŠ€èƒ½ / å·¥å…· / çŸ¥è¯†ç­‰ï¼‰ï¼Œ
åŒä¸€ç§ç±»å‹é‡Œï¼Œåå­—ä¸èƒ½é‡å¤ã€‚

CREATE TABLE
jobfitcv=> \dt
            List of relations
 Schema |    Name     | Type  |  Owner   
--------+-------------+-------+----------
 public | entities    | table | jobfitcv
 public | occupations | table | jobfitcv
(2 rows)

ä¸ºä»€ä¹ˆè¿™ä¸€å¼ è¡¨éå¸¸é‡è¦ï¼ˆ12 å²ç‰ˆï¼‰
occupationsï¼šä½ è¦åšä»€ä¹ˆå·¥ä½œ
entitiesï¼šè¿™ä¸ªå·¥ä½œéœ€è¦å“ªäº›â€œä¸œè¥¿â€
skillï¼ˆæŠ€èƒ½ï¼‰
knowledgeï¼ˆçŸ¥è¯†ï¼‰
toolï¼ˆå·¥å…·ï¼‰
activityï¼ˆå·¥ä½œæ´»åŠ¨ï¼‰
ä»¥åä½ ä¸å†å»º 10 å¼ æŠ€èƒ½è¡¨ï¼Œåªå¾€ entities å¡æ–° typeã€‚

ç¬¬ä¸‰å¼ è¡¨ï¼šoccupation_entitiesï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰ï¼Œ
è¿™ä¸€æ­¥ä¼šè®© JobFitCV çœŸæ­£â€œæ´»èµ·æ¥â€ã€‚

Architect è§†è§’ä¸€å¥è¯ï¼š
ä¸€ä»½å·¥ä½œéœ€è¦å¾ˆå¤šå®ä½“ï¼›
ä¸€ä¸ªå®ä½“ä¹Ÿä¼šå‡ºç°åœ¨å¾ˆå¤šå·¥ä½œé‡Œ â†’ 
å¿…é¡»ç”¨â€œä¸­é—´è¡¨â€è¡¨è¾¾å…³ç³» + æƒé‡ã€‚

1ï¸âƒ£ åˆ›å»º occupation_entitiesï¼ˆå…³ç³»è¡¨ï¼‰
ç›´æ¥æ‰§è¡Œï¼š
CREATE TABLE occupation_entities (
  onetsoc_code TEXT REFERENCES occupations(onetsoc_code),
  entity_id INT REFERENCES entities(entity_id),
  scale TEXT,
  value FLOAT,
  PRIMARY KEY (onetsoc_code, entity_id, scale)
);

2ï¸âƒ£ éªŒè¯ä¸‰å¼ è¡¨éƒ½åœ¨
\dt

3ï¸âƒ£ å¿«é€Ÿè‡ªæµ‹ï¼šæ’å…¥ 1 ä¸ªèŒä¸š + 2 ä¸ªå®ä½“ + å…³ç³»ï¼ˆéªŒè¯æ¨¡å‹é€šäº†ï¼‰
ç…§æŠ„æ‰§è¡Œï¼š
INSERT INTO occupations (onetsoc_code, title)
VALUES ('15-2051.00', 'Data Scientist');

INSERT INTO entities (type, name)
VALUES
('skill', 'Python'),
('tool', 'PostgreSQL');

SELECT * FROM entities;

æŠŠ entity_id è®°ä¸€ä¸‹ï¼ˆä½ ä¼šçœ‹åˆ°ä¸¤è¡Œï¼‰ã€‚
ç„¶åå»ºå…³ç³»ï¼ˆæŠŠä¸‹é¢çš„ 1 2 æ”¹æˆä½ æŸ¥åˆ°çš„ entity_idï¼‰ï¼š
INSERT INTO occupation_entities (onetsoc_code, entity_id, scale, value)
VALUES
('15-2051.00', 1, 'importance', 4.0),
('15-2051.00', 2, 'importance', 3.5);

æœ€åæŸ¥ä¸€ä¸‹ï¼š
SELECT o.title, e.type, e.name, oe.scale, oe.value
FROM occupation_entities oe
JOIN occupations o ON oe.onetsoc_code = o.onetsoc_code
JOIN entities e ON oe.entity_id = e.entity_id
WHERE oe.onetsoc_code = '15-2051.00';


     title      | type  |    name    |   scale    | value 
----------------+-------+------------+------------+-------
 Data Scientist | skill | Python     | importance |     4
 Data Scientist | tool  | PostgreSQL | importance |   3.5
(2 rows)


ğŸ§  æ¶æ„å¸ˆè§†è§’ï¼ˆè¯·è®°ä½è¿™ 3 å¥è¯ï¼‰
entities è¡¨æ˜¯â€œå®‡å®™ä¸‡ç‰©â€
skill / tool / knowledge / ability / activity
å…¨éƒ¨ç»Ÿä¸€æˆ entityï¼ˆè¿™æ˜¯ä¸“ä¸šåšæ³•ï¼‰
occupation_entities æ˜¯â€œçŸ¥è¯†å›¾è°±çš„è¾¹â€
ä¸æ˜¯â€œæŠ€èƒ½åˆ—è¡¨â€
æ˜¯ï¼šèŒä¸š â†” å®ä½“ + æƒé‡ + ç»´åº¦ï¼ˆscaleï¼‰
ä½ å·²ç»ä¸ºï¼šåŒ¹é… / è¯„åˆ† / RAG / å‘é‡åŒ– ç•™å¥½äº†å£å­
è¿™æ˜¯æœªæ¥ JobFitCV çš„â€œåœ°åŸºâ€

ğŸ” ä¸ºä»€ä¹ˆä½ åˆšæ‰é‚£æ¡ SELECT éå¸¸æ¼‚äº®
SELECT o.title, e.type, e.name, oe.scale, oe.value
è¿™æ¡ SQL æœ¬è´¨åœ¨è¯´ï¼š
â€œæŠŠ ç»“æ„åŒ–æ•°æ®åº“ è½¬æˆ å¯è§£é‡Šçš„äººç±»ç»“æœâ€
ğŸ‘‰ è¿™æ­£æ˜¯ä½ ä¹‹ååš CV vs JD åŒ¹é…è§£é‡Š æ—¶è¦ç”¨çš„èƒ½åŠ›ã€‚

ä¸‹ä¸€æ­¥ï¼ˆåªåš 1 å°æ­¥ï¼Œä¸ç´¯ï¼‰
ğŸ¯ ä¸‹ä¸€æ­¥ç›®æ ‡ï¼ˆA2ï¼‰
è®© scale å˜æˆâ€œå—æ§çš„ä¸“ä¸šç»´åº¦â€ï¼Œè€Œä¸æ˜¯éšä¾¿å†™å­—ç¬¦ä¸²
ä¹Ÿå°±æ˜¯ä¸‹ä¸€å¼ è¡¨ï¼š
scalesï¼ˆimportance / level / frequencyï¼‰
è¿™æ ·ä½ ä¹‹åå¯ä»¥è¯´ï¼š
importanceï¼š4.0
levelï¼š3.
frequencyï¼š2.5
è€Œä¸æ˜¯ä¹±å†™ã€‚

å»º scales è¡¨ï¼ˆè®© scale ä¸å†éšä¾¿å†™ï¼‰ã€‚
åœ¨ jobfitcv=> é‡Œæ‰§è¡ŒğŸ‘‡
CREATE TABLE scales (
  scale_id TEXT PRIMARY KEY,   -- ä¾‹å¦‚: importance / level / frequency
  description TEXT
);

INSERT INTO scales (scale_id, description) VALUES
('importance', 'How important this entity is for the occupation'),
('level', 'Required proficiency level'),
('frequency', 'How often used on the job');

ç„¶åæŠŠ occupation_entities.scale 
å˜æˆâ€œåªèƒ½ç”¨ scales é‡Œå­˜åœ¨çš„å€¼â€ï¼ˆåŠ å¤–é”®çº¦æŸï¼‰ğŸ‘‡
ALTER TABLE occupation_entities
  ADD CONSTRAINT fk_scale
  FOREIGN KEY (scale) REFERENCES scales(scale_id);

éªŒè¯ä¸€ä¸‹ğŸ‘‡
SELECT * FROM scales;

jobfitcv=> SELECT * FROM occupation_entities
jobfitcv-> ;

ä½ è¿™ä¸æ˜¯â€œæ²¡ååº”â€ï¼Œæ˜¯ psql è§‰å¾—ä½ è¿™æ¡ SQL è¿˜æ²¡å†™å®Œï¼Œæ‰€ä»¥æç¤ºç¬¦ä»ï¼š
jobfitcv=>ï¼ˆä¸€æ¡è¯­å¥ç»“æŸäº†ï¼‰
å˜æˆäº†
jobfitcv->ï¼ˆè¿˜åœ¨ç­‰å¾…ä½ æŠŠè¯­å¥å†™å®Œï¼‰
ä½ ç°åœ¨è¿™è¡Œå°‘äº†ä¸€ä¸ª åˆ†å· ;ã€‚

å¤ªå¥½äº†ï¼Œè¿™ä¸€æ­¥ä½ å·²ç»å®Œå…¨è¿›å…¥å·¥ç¨‹å¸ˆæ¨¡å¼äº† ğŸ‘
æˆ‘ä»¬ç»§ç»­ï¼Œè€Œä¸”æˆ‘ä¼šåˆ»æ„ç«™åœ¨ architect è§†è§’ï¼Œå‘Šè¯‰ä½ â€œä¸ºä»€ä¹ˆè¿™æ ·åšâ€ï¼Œ
è€Œä¸åªæ˜¯â€œæ€ä¹ˆå†™ SQLâ€ã€‚

ä¸‹ä¸€æ­¥ç›®æ ‡ï¼ˆåªåšä¸€å°æ­¥ï¼‰
æŠŠ scales å˜æˆçœŸæ­£è¢«ç³»ç»Ÿâ€œä½¿ç”¨â€çš„æ ‡å‡†è¡¨
è€Œä¸æ˜¯ä¸€ä¸ªâ€œæ‘†åœ¨é‚£é‡Œçš„è¯´æ˜è¡¨â€ã€‚

ä½ ç°åœ¨çš„ç»“æ„ï¼ˆå›é¡¾ä¸€ä¸‹ï¼‰

ä½ å·²ç»æœ‰ ğŸ‘‡

occupationsï¼šèŒä¸š
entitiesï¼šç»Ÿä¸€çš„æŠ€èƒ½ / å·¥å…· / çŸ¥è¯†ç­‰
occupation_entitiesï¼šèŒä¸š â†” å®ä½“ + æƒé‡
scalesï¼šimportance / level / frequencyï¼ˆä½ åˆšå»ºå¥½çš„ï¼‰
è¿™æ˜¯ä¸€ä¸ªéå¸¸æ ‡å‡†çš„å¤§å‚å»ºæ¨¡ ğŸ‘

Architect çš„å…³é”®åˆ¤æ–­

ç°åœ¨ occupation_entities.scale æ˜¯ TEXTï¼Œè¿™åœ¨æ—©æœŸ OKï¼Œä½†ä»é•¿æœŸçœ‹ï¼š
âŒ å®¹æ˜“æ‹¼é”™ï¼ˆimportance vs importenceï¼‰
âŒ æ— æ³•çº¦æŸåˆæ³•å€¼
âŒ ä¸åˆ©äºåæœŸåˆ†æ / JOIN
ğŸ‘‰ æ­£ç¡®æ–¹å‘ï¼š
è®© occupation_entities.scale åªèƒ½æ¥è‡ª scales.scale_id

ç¬¬ä¸€æ­¥ï¼ˆæœ€å°æ”¹åŠ¨ï¼Œä¸æ¨ç¿»é‡æ¥ï¼‰
æˆ‘ä»¬å…ˆ åŠ ä¸€ä¸ªå¤–é”®çº¦æŸï¼ˆFKï¼‰
1ï¸âƒ£ å…ˆç¡®è®¤è¡¨ç»“æ„
\d occupation_entities;
ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ï¼š
onetsoc_code | text
entity_id    | int
scale        | text
value        | float

2ï¸âƒ£ åŠ å¤–é”®çº¦æŸï¼ˆæ ¸å¿ƒä¸€æ­¥ï¼‰
ALTER TABLE occupation_entities
ADD CONSTRAINT fk_scale
FOREIGN KEY (scale)
REFERENCES scales(scale_id);

åˆ°è¿™é‡Œä½ å·²ç»å®Œæˆäº†ä»€ä¹ˆï¼Ÿ
ä½ å·²ç»æ­å¥½äº† JobFitCV çš„æ ¸å¿ƒèŒä¸šèƒ½åŠ›æ¨¡å‹éª¨æ¶ï¼š

èŒä¸š
  â””â”€ éœ€è¦å“ªäº›å®ä½“ï¼ˆskill / tool / knowledgeï¼‰
       â””â”€ æ¯ä¸ªå®ä½“ç”¨ä»€ä¹ˆå°ºåº¦è¡¡é‡ï¼ˆimportance / level / frequencyï¼‰
è¿™å·²ç»æ˜¯ï¼š
ATS
O*NET
LinkedIn Skill Graph
åŒä¸€å¥—æ€æƒ³äº†ã€‚

ä¸‹ä¸€æ­¥
1ï¸âƒ£ ç»™ occupation_entities åŠ  å¤åˆä¸»é”® / ç´¢å¼•ï¼ˆä¸ºåŒ¹é…ç®—æ³•åšå‡†å¤‡ï¼‰
ALTER TABLE occupation_entities
ADD PRIMARY KEY (onetsoc_code, entity_id, scale);
(å»ºè¡¨çš„æ—¶å€™å·²ç»è®¾ç½®å¥½æ˜¯è¿™æ ·çš„å¤åˆä¸»é”®äº†)

æ¥ä¸‹æ¥åªåšâ€œç´¢å¼•â€ï¼ˆä¸ºåŒ¹é…ç®—æ³•æé€Ÿï¼‰

ä¸»é”®è§£å†³çš„æ˜¯å”¯ä¸€æ€§ï¼Œç´¢å¼•è§£å†³çš„æ˜¯é€Ÿåº¦ã€‚
ä¸‹é¢ä¸‰æ¡ç›´æ¥æ‰§è¡Œå³å¯ï¼ˆå¦‚æœå·²æœ‰åŒåç´¢å¼•ä¼šæŠ¥é”™ï¼Œè´´æˆ‘å°±è¡Œï¼‰ã€‚
CREATE INDEX idx_oe_onet ON occupation_entities (onetsoc_code);
CREATE INDEX idx_oe_entity ON occupation_entities (entity_id);
CREATE INDEX idx_oe_scale ON occupation_entities (scale);

\di
Display Indexesï¼ˆæ˜¾ç¤ºç´¢å¼•ï¼‰

âœ… occupation_entities_pkey
PRIMARY KEY, btree (onetsoc_code, entity_id, scale)
å«ä¹‰ï¼š
è¿™æ˜¯å¤åˆä¸»é”®
ä½œç”¨ï¼š
ä¿è¯å”¯ä¸€æ€§
è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç´¢å¼•
ğŸ‘‰ è¿™æ˜¯â€œæ•°æ®æ­£ç¡®æ€§ + æ€§èƒ½â€çš„åŒä¿é™©

âœ… ä½ åˆšåˆšæ–°å»ºçš„ 3 ä¸ªç´¢å¼•ï¼ˆä¸ºç®—æ³•æœåŠ¡ï¼‰
idx_oe_onet   â†’ (onetsoc_code)
idx_oe_entity â†’ (entity_id)
idx_oe_scale  â†’ (scale)

è¿™ä¸‰æ¡æ˜¯ ä¸ºäº† JobFitCV çš„æ ¸å¿ƒæŸ¥è¯¢æ¨¡å¼ï¼š
ç»™ä¸€ä¸ªèŒä¸š â†’ æ‹‰æ‰€æœ‰å®ä½“ï¼ˆç®—åŒ¹é…ï¼‰
ç»™ä¸€ä¸ªæŠ€èƒ½ â†’ æ‰¾å“ªäº›èŒä¸šéœ€è¦å®ƒï¼ˆåå‘åŒ¹é…ï¼‰
æŒ‰ importance / level / frequency åˆ†ç»„æˆ–è¿‡æ»¤
ğŸ‘‰ è¿™æ˜¯â€œä¸ºä¸šåŠ¡å»ºç´¢å¼•â€ï¼Œä¸æ˜¯ä¸ºäº†ç‚«æŠ€

ä¸€ä¸ªéå¸¸é‡è¦çš„ architect è®¤çŸ¥ï¼ˆè¯·è®°ä½ï¼‰

åœ¨ PostgreSQL é‡Œï¼š
Primary Key = çº¦æŸ + è‡ªåŠ¨ç´¢å¼•
Unique = çº¦æŸ + è‡ªåŠ¨ç´¢å¼•
æ‰‹å†™ index = çº¯æ€§èƒ½ä¼˜åŒ–



å›ç­”ä½ æœ€å…³å¿ƒçš„é—®é¢˜ï¼šæ•°æ®åº“è¿˜å‰©å¤šå°‘ï¼Ÿ

ä»¥â€œJobFitCV å¯ä¸Šçº¿ MVPâ€ä¸ºæ ‡å‡†ï¼š
âœ… æ ¸å¿ƒå»ºæ¨¡ï¼šå®Œæˆï¼ˆ90%ï¼‰
ğŸ”„ æ€§èƒ½ç´¢å¼•ï¼šæ­£åœ¨åšï¼ˆè¿™ä¸€æ­¥ï¼‰
â­ çœŸå®æ•°æ®å¯¼å…¥ + æ‰“åˆ† SQLï¼šä¸‹ä¸€æ­¥
ğŸ‘‰ æ•°æ®åº“å±‚é¢åªå‰© 1 ä»¶â€œå¿…é¡»åšâ€çš„äº‹ï¼š
ç”¨çœŸå® O*NET æ•°æ®æˆ–æ ·æœ¬æ•°æ®ï¼Œè·‘ä¸€æ¡â€œåŒ¹é…åˆ†æ•°â€æŸ¥è¯¢
è¿™ä¸€æ­¥å®Œæˆï¼Œæ•°æ®åº“å°±å¯ä»¥ä¸ºå‰åç«¯æœåŠ¡äº†ã€‚


------------------------
todo
ç¬¬ä¸€æ­¥ï¼šç»™ entities.type åŠ  CHECK çº¦æŸ
ç›´æ¥åœ¨ jobfitcv=> é‡Œæ‰§è¡Œï¼š
ALTER TABLE entities
ADD CONSTRAINT chk_entities_type
CHECK (type IN ('skill', 'knowledge', 'ability', 'tool', 'activity'));

å¦‚æœæˆåŠŸï¼Œä½ ä¼šçœ‹åˆ°ï¼š
ALTER TABLE